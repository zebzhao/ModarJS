window.pyscript={modules:{}},pyscript.defer=function(e){setTimeout(e,1)},pyscript.range=function(e,t,r){void 0===t&&(t=e,e=0),r=r||1;for(var n=[],i=e;t>i;i+=r)n.push(i);return n},pyscript.noop=function(){},pyscript.extend=function(e,t){for(var r in t)t.hasOwnProperty(r)&&void 0!==t[r]&&(e[r]=t[r]);return e},pyscript.type=function(e){var t=Object.prototype.toString.call(e);return t.toLowerCase().substring(8,t.length-1)},pyscript.map=function(e,t){var r,n;switch(pyscript.type(t)){case"array":for(r=[],n=0;n<t.length;n++)r.push(e.call(null,t[n],n));break;default:r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e.call(null,t[n],n))}return r},pyscript.all=function(e,t){for(var r in t)if(t.hasOwnProperty(r)&&!e.call(null,t[r],r))return!1;return!0},pyscript.any=function(e,t){for(var r in t)if(t.hasOwnProperty(r)&&e.call(null,t[r],r))return!0;return!1},pyscript.partial=function(e){var t=[].slice.call(arguments).slice(1);return function(){var r=[].slice.call(arguments);return e.apply(this,t.concat(r))}},function(){function e(e){return-1!=e.indexOf("://")?e:pyscript.prefix+e}pyscript.mockDependencies=function(t){pyscript.assert(jasmine,"mockDependencies() must be called from Jasmine testing."),spyOn(pyscript,"_getURL").and.callFake(function(r){return t[r]?(console.log("%c"+r+" overridden by "+t[r],"color:DodgerBlue;"),e(t[r])):e(r)})},pyscript._getURL=e}(),pyscript["import"]=function(e,t,r){var n=document.createElement(e);return document.head.appendChild(n),n.onload=r,pyscript.extend(n,t),n},pyscript.initialize=function(e){var t=window._py_all_modules=window._py_all_modules||{},r=t[e];return r?r._initialize():void pyscript.assert("Module "+e+" is not defined!")},pyscript.module=function(e){var t=window._py_all_modules=window._py_all_modules||{},r=t[e];return r?r._instance:null},pyscript.defmodule=function(e){var t={__name__:e,__initialized__:!1};pyscript.modules[e]=t;var r=window._py_all_modules=window._py_all_modules||{},n=window._py_cached_files=window._py_cached_files||pyscript.dict();if(r[e])return r[e];var i=r[e]={__name__:e,_dependencies:[],_modules:[],_instance:t,_status:"",_callbacks:pyscript.list(),"import":function(e){return i._dependencies.push({url:e}),i},initialize:function(e){return i._modules.push(e),i},def:function(r){var n=pyscript.map(function(r,n){return pyscript.isFunction(r)?pyscript.partial(r,t):void pyscript.assert(!1,"'"+n+"' cannot be set as a function of '"+e+"'")},r);return pyscript.extend(t,n),i},__init__:function(e){return i._callbacks.append(e),i},__new__:function(e){return e.call(null,t),i},_initialize:function(){function s(){var e=i._dependencies;if(e.length==a)o();else if(a<e.length){var t=e[a].url;void 0!==n[t]?(a++,s()):(n[t]=!1,pyscript["import"]("script",{src:pyscript._getURL(t)},function(){pyscript.debug&&console.log(t,"loaded"),n[t]=!0,a++,s()},!0))}}function o(){if(i._modules.length==p)pyscript.defer(function(){i._status="loaded",i._callbacks.invoke(function(e){e.call(null,t)}),c.resolve(t),pyscript.debug&&console.log("%c"+e+" loaded","font-weight:bold;"),t.__initialized__=!0});else{var n=i._modules[p];void 0===r[n]?pyscript.assert(!1,"","Module '"+n+"' is not defined!"):pyscript.initialize(n).then(function(){p++,o()})}}var c=pyscript.async();if("loaded"==i._status)return pyscript.defer(function(){c.resolve(t)}),c.promise;if("loading"==i._status)return i._callbacks.append(function(){c.resolve(t)}),c.promise;pyscript.debug&&console.log("%c"+e+" loading...","color:DodgerBlue;"),i._status="loading";var a=0,p=0;return s(),c.promise}};return i},pyscript.debug=!0,pyscript.prefix="",function(e){e.extend(e,{assert:function(e,t,r){if(!e)throw r&&console.log(r),new Error(t)},check:function(t,r){if(r===Object)e.assert(e.isObject(t),"expected Object got "+Object.prototype.toString.call(t),t);else if(r==Array)e.assert(e.isArray(t),"expected Array got "+Object.prototype.toString.call(t),t);else if(r==String)e.assert(e.isString(t),"expected String got "+Object.prototype.toString.call(t),t);else if(r==Boolean)e.assert(e.isBoolean(t),"expected Boolean got "+Object.prototype.toString.call(t),t);else if(r==Number)e.assert(e.isNumber(t),"expected Number got "+Object.prototype.toString.call(t),t);else if(r==Function)e.assert(e.isFunction(t),"expected Function got "+Object.prototype.toString.call(t),t);else if(e.isFunction(r))e.assert(r.call(t,t),"type check function returned false",t);else if(e.isObject(r)){e.check(t,Object);for(var n in r)r.hasOwnProperty(n)&&e.check(t[n],r[n])}},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isDefined:function(e){return"[object Null]"!==Object.prototype.toString.call(e)&&"[object Undefined]"!==Object.prototype.toString.call(e)},isNumber:function(e){return"[object Number]"===Object.prototype.toString.call(e)},isBoolean:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}})}(pyscript),function(e){function t(){var e=this;e._callbacks=pyscript.list(),e._binding=null,e.promise={then:function(t){return e._callbacks.append(t),e.promise}}}e.extend(t.prototype,{bind:function(e){return this._binding=e,this},resolve:function(){var e=arguments,t=this;this._callbacks.invoke(function(r){r.apply(t._binding,e)})}}),e.async=function(){return new t}}(pyscript),function(e){function t(t){pyscript.check(t,{}),e.extend(this,t)}e.extend(t.prototype,{update:function(e){return pyscript.extend(this,e)},keys:function(){var e=[];for(var t in this)this.hasOwnProperty(t)&&e.push(t);return e},values:function(){var e=[];for(var t in this)this.hasOwnProperty(t)&&e.push(this[t]);return e},clear:function(){for(var e in this)this.hasOwnProperty(e)&&delete this[e]},contains:function(e){return this.hasOwnProperty(e)},get:function(e,t){return void 0===this[e]?t:this[e]},find:function(e){for(var t in this)if(this.hasOwnProperty(t)&&this[t]==e)return t}}),e.dict=function(e){return new t(e||{})}}(pyscript),function(e){function t(e){pyscript.assert(e,Array),this.array=e}e.extend(t.prototype,{append:function(e){this.array.push(e)},unique:function(){return this.array.filter(function(e,t,r){return-1==r.indexOf(e,t+1)})},find:function(e,t){pyscript.check(e,String);for(var r=[],n=0;n<this.array.length;n++)t==this.array[n][e]&&r.push(this.array[n]);return r},invoke:function(e){pyscript.check(e,Function);for(var t=[],r=0;r<this.array.length;r++)t[r]=e.call(this,this.array[r],r,this.array);return t},first:function(){return this.array[0]},last:function(){return this.array[this.array.length-1]},remove:function(e){var t=this.array.indexOf(e);return t>=0?(this.array.splice(t,1),t):!1}}),e.list=function(e){return new t(e||[])}}(pyscript),function(e){function t(e){this.string=e}e.extend(t.prototype,{contains:function(e){return-1!=this.string.indexOf(e)},ellipsis:function(e){return e=e||18,this.string.length>e?this.string.substr(0,e-3)+"...":this.string},endsWith:function(e){return-1!==this.string.indexOf(e,this.string.length-e.length)},beginsWith:function(e){return 0==this.string.indexOf(e)},replaceLastIndexOf:function(e,t){var r=this.string.lastIndexOf(e);return r>=0?this.string.substring(0,r)+t+this.string.substring(r+e.length):void 0},toCamelCase:function(){return this.string.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(e,t){return 0===+e?"":0==t?e.toLowerCase():e.toUpperCase()})},sprintf:function(e){var t=this.string;for(var r in e)if(e.hasOwnProperty(r)){var n=new RegExp("{"+r+"}","gi");t=t.replace(n,e[r])}return t}}),e.str=function(e){return new t(e||"")}}(pyscript),pyscript.defmodule("cache").__init__(function(e){e.onSyncSuccess=pyscript.noop,e._storage=pyscript.dict()}).def({flush:function(e){e._storage.clear()},cacheFile:function(e,t,r){var n=pyscript.async(),i=new FileReader;return i.onload=function(i){e._storage[t]={localUrl:i.target.result,file:r},n.resolve(t,i.target.result)},i.readAsDataURL(r.file),n.promise},fetchUrl:function(e,t){return e._storage.get(t,{localUrl:t}).localUrl},syncAll:function(e){pyscript.map(e.syncFile,e._storage.keys())},syncFile:function(e,t){var r=e._storage.get(t);if(r){var n=r.file;n&&pyscript.requests.upload(r.url,n.file,n).then(e.onSyncSuccess)}},fetch:function(e,t,r){pyscript.check(t,String);var n=pyscript.async();return e._storage.contains(t)?pyscript.defer(function(){n.resolve({success:!0,cached:!0,url:t,parser:r,result:e.get(t)})}):pyscript.requests.get(t).then(function(){var i={success:!1,url:t,parser:r};if(this.http.success){var s=this.responseText||"";s=r?r(s):s,e._storage[t]=s,i.result=s,i.success=!0}n.resolve(i)}),n.promise},move:function(e,t,r){if(pyscript.check(r,String),pyscript.check(t,String),r!=t){if(!e._storage.contains(t))throw new ReferenceError("Cannot find "+t+" in cache!");e._storage[r]=e._storage[t],delete e._storage[t]}},"delete":function(e,t){pyscript.check(t,String),delete e._storage[t]},contains:function(e,t){return pyscript.check(t,String),e._storage.contains(t)},store:function(e,t,r){e._storage[t]=r},find:function(e,t){return e._storage.find(t)},get:function(e,t,r){return e._storage.get(t,r)},keys:function(e){return e._storage.keys()},values:function(e){return e._storage.values()}}),pyscript.cache=pyscript.module("cache"),pyscript.defmodule("hotkeys").__new__(function(e){e.scope="all",e._keyMap={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},e._downKeys=[],e._modifierMap={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"},e._modifier={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},e._mods={16:!1,18:!1,17:!1,91:!1},e._handlers={};for(var t=1;20>t;t++)e._keyMap["f"+t]=111+t}).__init__(function(e){document.addEventListener("keydown",e.dispatchKeyEvent),document.addEventListener("keyup",e.clearModifiers)}).def({clearModifiers:function(e,t){var r=t.keyCode,n=e._downKeys.indexOf(r);n>=0&&e._downKeys.splice(n,1),(93===r||224===r)&&(r=91),r in e._mods&&(e._mods[r]=!1)},dispatchKeyEvent:function(e,t){var r=t.keyCode;-1===e._downKeys.indexOf(r)&&e._downKeys.push(r),(93===r||224===r)&&(r=91),r in e._mods&&(e._mods[r]=!0);for(var n in e._mods)e._mods[n]=t[e._modifierMap[n]];if(e.filter.call(this,t)&&r in e._handlers)for(var i,s=e._mods,o=0;o<e._handlers[r].length;o++){i=e._handlers[r][o];var c=i.mods,a=c.length>0;for(var p in s)if(p=parseInt(p),!s[p]&&-1!=c.indexOf(p)||s[p]&&-1==c.indexOf(p)){a=!1;break}(0!==c.length||s[16]||s[18]||s[17]||s[91])&&!a||i.method(t,i)}},getKeys:function(e,t){var r=t.replace(/\s/g,"").split(",");return""===r[r.length-1]&&(r[r.length-2]+=","),r},getMods:function(e,t){for(var r=t.slice(0,t.length-1),n=0;n<r.length;n++)r[n]=e._modifier[r[n].toLowerCase()];return r},addKey:function(e,t,r,n){var i=e.getKeys(t);n||(n=r,r="all");for(var s,o,c=0;c<i.length;c++){o=i[c].split("-"),s=o[o.length-1],s=e._keyMap[s]||s.toUpperCase().charCodeAt(0);var a=[];o.length>1&&(a=e.getMods(o)),s in e._handlers||(e._handlers[s]=[]),e._handlers[s].push({shortcut:i[c],scope:r,method:n,key:i[c],mods:a})}},filter:function(e,t){var r=t.target.tagName;return!("INPUT"===r||"SELECT"===r||"TEXTAREA"===r)}}),pyscript.hotkeys=pyscript.module("hotkeys"),pyscript.defmodule("requests").__init__(function(e){e.interceptors=[],e.beforeRequest=null,e.parsers={echo:function(e){return e}},e.headers=null,e.mockServer={routes:{GET:{},POST:{},PATCH:{},DELETE:{},PUT:{},UPLOAD:{}},request:function(t,r,n,i,s){var o=pyscript.async();return pyscript.defer(function(){var c=e.mockServer.routes[t][r];pyscript.isFunction(c)&&o.bind(c.call(null,r,n,i,s)).resolve()}),o.promise},defRoute:function(t,r,n){return pyscript.check(t,String),pyscript.check(n,Function),t=t.toUpperCase(),pyscript.assert(e.mockServer.routes[t],"method must be GET/POST/PATCH/PUT/DELETE."),e.mockServer.routes[t][r]=n,e.mockServer}}}).def({mockSetup:function(e){pyscript.assert(jasmine,"mockSetup() can only be called in Jasmine testing!"),spyOn(e,"get").and.callFake(pyscript.partial(e.mockServer.request,"GET")),spyOn(e,"put").and.callFake(pyscript.partial(e.mockServer.request,"PUT")),spyOn(e,"del").and.callFake(pyscript.partial(e.mockServer.request,"DELETE")),spyOn(e,"patch").and.callFake(pyscript.partial(e.mockServer.request,"PATCH")),spyOn(e,"post").and.callFake(pyscript.partial(e.mockServer.request,"POST")),spyOn(e,"upload").and.callFake(pyscript.partial(e.mockServer.request,"UPLOAD"))},get:function(e,t,r,n){return e._send("GET",t,null,r,n)},del:function(e,t,r,n){return e._send("DELETE",t,null,r,n)},patch:function(e,t,r,n,i){return e._send("PATCH",t,r,n,i)},post:function(e,t,r,n,i){return e._send("POST",t,r,n,i)},put:function(e,t,r,n,i){return e._send("PUT",t,r,n,i)},upload:function(e,t,r,n){function i(){for(var t,r=0;r<e.interceptors.length;r++)if(t=e.interceptors[r].call(this))return;e._parseStatus(this),s.bind(this).resolve.apply(s)}pyscript.check(t,String);var s=pyscript.async(),o=new FormData;o.append("upload",r);var c=new XMLHttpRequest;if(c.onload=i,c.onerror=i,c.open("POST",t,!n),e.headers)for(var a in e.headers)e.headers.hasOwnProperty(a)&&c.setRequestHeader(a,e.headers[a]);return pyscript.isFunction(e.beforeRequest)&&e.beforeRequest.call(null,c),c.send(o),s.promise},_send:function(e,t,r,n,i,s){function o(){for(var t,r=0;r<e.interceptors.length;r++)if(t=e.interceptors[r].call(this))return;e._parseStatus(this),c.bind(this).resolve()}pyscript.check(t,String),pyscript.check(t,r);var c=pyscript.async();i=pyscript.extend({"Content-Type":"application/json"},i||{}),e.headers&&pyscript.extend(i,e.headers),n=JSON.stringify(n);var a=new XMLHttpRequest;a.onload=o,a.onerror=o,a.open(t,r,!s);for(var p in i)i.hasOwnProperty(p)&&a.setRequestHeader(p,i[p]);return pyscript.isFunction(e.beforeRequest)&&e.beforeRequest.call(null,a),a.send(n),s?a:c.promise},_parseStatus:function(e,t){var r=t.status;t.http={success:r>=200&&400>r,redirect:r>=300&&400>r,error:r>=400,unavailable:503==r,serverError:r>=500,clientError:r>=400&&500>r,conflict:409==r,created:201==r,unauthorized:401==r,missing:404==r,badRequest:400==r,noContent:204==r,ok:200==r,network:0==r||void 0===r}}}),pyscript.requests=pyscript.module("requests"),pyscript.defmodule("router").__init__(function(e){e._routes={},e._params={},e._promises=[],e.proxy={setHash:function(e){window.location.hash=e},setHref:function(e){window.location.href=e},setPathname:function(e){window.location.pathname=e},getHash:function(){return window.location.hash},getHref:function(){return window.location.href},getPathname:function(){return window.location.pathname}},window.addEventListener("hashchange",function(){e._onchange.call(e)})}).def({mockSetup:function(e,t){pyscript.assert(jasmine,"mockSetup() can only be called in Jasmine testing."),spyOn(e.proxy,"setHash").and.callFake(function(t){e.proxy.setHref(e.proxy.getHref().split("#")[0]+"#"+t),pyscript.defer(e._onchange)}),spyOn(e.proxy,"getHash").and.callFake(function(){var t=e.proxy.getHref().split("#")[1];return t?"#"+t:""}),spyOn(e.proxy,"setHref").and.callFake(function(r){if(t)throw new Error("Page refresh detected. Redirection to: "+r);e.proxy._href=r}),spyOn(e.proxy,"getHref").and.callFake(function(){return e.proxy._href||window.location.href}),spyOn(e.proxy,"setPathname").and.callFake(function(r){if(t)throw new Error("Page refresh detected. Redirection to: "+r);e.proxy.setHref(e.proxy.getHref().replace(e.proxy.getPathname(),r))}),spyOn(e.proxy,"getPathname").and.callFake(function(){var t=e.proxy.getHref(),r=t.replace("://","").split("/",1)[1]||"";return r=r.split("?")[0].split("#")[0]})},refresh:function(){pyscript.defer(function(){var e=document.createEvent("Event");e.initEvent("hashchange",!0,!0),window.dispatchEvent(e)})},route:function(e,t,r){t=pyscript.isString(t)?[t]:t;for(var n,i=0;i<t.length;i++)n=t[i],e._routes[n]=e._routes[n]||[],e._routes[n].push(r);return e},_onchange:function(e){var t=e.proxy.getHash().slice(2).split("?")[0].split("/"),r=e.parseQuery(),n="";pyscript.map(function(i,s){n=n+"/"+i;var o=e._routes[s==t.length-1?n:n+"*"];if(o&&o.length>0)for(var c=0;c<o.length;c++)o[c].call(e,r)},t);for(var i=0;i<e._promises.length;i++)e._promises[i].resolve();e._promises=[]},parseQuery:function(e){var t=e.proxy.getHash(),r=[];t.indexOf("?")&&(r=t.slice(2).split("?"),r=r[r.length-1].split("&"));var n,i={};return pyscript.map(function(e){n=e.split("="),i[n[0]]=decodeURIComponent(n[1])},r),i},asQueryString:function(e,t){var r="?";for(var n in t)t.hasOwnProperty(n)&&t[n]&&(r+=n+"="+encodeURIComponent(t[n])+"&");return r.substr(0,r.length-1)},go:function(e,t,r){pyscript.check(t,String);var n=pyscript.async();return e._promises.push(n),e.proxy.setHash(t+this.asQueryString(e._params)),r&&e.refresh(),n.promise},query:function(e,t){pyscript.check(t,Object),e._params=t;var r=e.parseQuery();pyscript.extend(r,t),e.proxy.setHref(e.proxy.getHref().split("?")[0]+e.asQueryString(e._params))},redirect:function(e,t){e.proxy.setPathname(t)}}),pyscript.router=pyscript.module("router");