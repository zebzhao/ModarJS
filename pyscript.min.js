function Cache(){self._storage=new Dict}window.pyscript={modules:{}},pyscript.defer=function(t){setTimeout(t,1)},pyscript.range=function(t,e,n){void 0===e&&(e=t,t=0),n=n||1;for(var r=[],i=t;e>i;i+=n)r.push(i);return r},pyscript.noop=function(){},pyscript.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t[n]=e[n]);return t},pyscript.type=function(t){var e=Object.prototype.toString.call(t);return e.toLowerCase().substring(8,e.length-1)},pyscript.map=function(t,e){var n,r;switch(pyscript.type(e)){case"array":for(n=[],r=0;r<e.length;r++)n.push(t.call(null,e[r],r));break;default:n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=t.call(null,e[r],r))}return n},pyscript.all=function(t,e){for(var n in e)if(e.hasOwnProperty(n)&&!t.call(null,e[n],n))return!1;return!0},pyscript.any=function(t,e){for(var n in e)if(e.hasOwnProperty(n)&&t.call(null,e[n],n))return!0;return!1},pyscript.partial=function(t){var e=[].slice.call(arguments).slice(1);return function(){var n=[].slice.call(arguments);return t.apply(this,e.concat(n))}},pyscript["import"]=function(t,e,n,r){var i=document.createElement(t);return r&&document.head.appendChild(i),i.onload=n,pyscript.extend(i,e),i},pyscript.initialize=function(t){var e=window._py_all_modules=window._py_all_modules||{},n=e[t];return n?n._initialize():void pyscript.assert("Module {name} is not defined!".sprintf({name:t}))},pyscript.module=function(t){var e=window._py_all_modules=window._py_all_modules||{},n=e[t];return n?n._instance:null},pyscript.defmodule=function(t){var e={__name__:t,__initialized__:!1};pyscript.modules[t]=e;var n=window._py_all_modules=window._py_all_modules||{},r=window._py_cached_files=window._py_cached_files||pyscript.dict();if(n[t])return n[t];var i=n[t]={__name__:t,_dependencies:[],_modules:[],_instance:e,_status:"",_callbacks:[],"import":function(t){return i._dependencies.push({url:t}),i},initialize:function(t){return i._modules.push(t),i},def:function(n){var r=pyscript.map(function(n,r){return pyscript.isFunction(n)?pyscript.partial(n,e):void pyscript.assert(!1,"'"+r+"' cannot be set as a function of '"+t+"'")},n);return pyscript.extend(e,r),i},__init__:function(t){return i._callbacks.push(t),i},__new__:function(t){return t.call(null,e),i},_initialize:function(){function o(){var t=i._dependencies;if(t.length==p)s();else if(p<t.length){var e=t[p].url;void 0!==r[e]?(p++,o()):(r[e]=!1,pyscript["import"]("script",{src:pyscript.prefix+e},function(t){pyscript.debug&&console.log(e,"loaded"),r[e]=!0,p++,o()},!0))}}function s(){if(i._modules.length==a)pyscript.defer(function(){e.__initialized__=!0,pyscript.map(function(t){t.call(null,e)},i._callbacks),c.resolve(e),pyscript.debug&&console.log("%c"+t+" loaded","font-weight:bold;"),i._status="loaded"});else{var r=i._modules[a];void 0===n[r]?pyscript.assert(!1,"","Module '"+r+"' is not defined!"):pyscript.initialize(r).then(function(){a++,s()})}}var c=pyscript.async();if("loaded"==i._status)return pyscript.defer(function(){c.resolve(e)}),c.promise;if("loading"==i._status)return i._callbacks.push(function(){c.resolve(e)}),c.promise;pyscript.debug&&console.log("%c"+t+" loading...","color:DodgerBlue;"),i._status="loading";var p=0,a=0;return o(),c.promise}};return i},pyscript.debug=!0,pyscript.prefix="",Array.prototype.unique=function(){return this.filter(function(t,e,n){return-1==n.indexOf(t,e+1)})},Array.prototype.remove=function(t){var e=this.indexOf(t);return e>=0?(this.splice(e,1),e):!1},Array.prototype.removeWhere=function(t,e){pyscript.check(t,String);for(var n=0;n<this.length;)e==this[n][t]?this.splice(n,1):n+=1},Array.prototype.copy=function(){return this.slice()},Array.prototype.first=function(){return this[0]},Array.prototype.last=function(){return this[this.length-1]},Array.prototype.apply=function(t){pyscript.check(t,Function);for(var e=[],n=0;n<this.length;n++)e[n]=t.call(this,n,this[n]);return e},Array.prototype.each=function(t){pyscript.check(t,Function);for(var e=[],n=0;n<this.length;n++)e[n]=t.call(this,this[n]);return e},Array.prototype.find=function(t,e){pyscript.check(t,String);for(var n=[],r=0;r<this.length;r++)e==this[r][t]&&n.push(this[r]);return n},function(t){t.extend(t,{assert:function(t,e,n){if(!t)throw n&&console.log(n),new Error(e)},check:function(e,n){if(n===Object)t.assert(t.isObject(e),"expected Object got "+Object.prototype.toString.call(e),e);else if(n==Array)t.assert(t.isArray(e),"expected Array got "+Object.prototype.toString.call(e),e);else if(n==String)t.assert(t.isString(e),"expected String got "+Object.prototype.toString.call(e),e);else if(n==Boolean)t.assert(t.isBoolean(e),"expected Boolean got "+Object.prototype.toString.call(e),e);else if(n==Function)t.assert(t.isFunction(e),"expected Function got "+Object.prototype.toString.call(e),e);else if(t.isFunction(n))t.assert(n.call(e,e),"type check function returned false",e);else if(t.isObject(n)){t.check(e,Object);for(var r in n)n.hasOwnProperty(r)&&t.check(e[r],n[r])}},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isDefined:function(t){return"[object Null]"!==Object.prototype.toString.call(t)&&"[object Undefined]"!==Object.prototype.toString.call(t)},isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)},isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}})}(pyscript),function(t){function e(){var t=this;t._callbacks=[],t._binding=null,t.promise={then:function(e){return t._callbacks.push(e),t.promise}}}t.extend(e.prototype,{bind:function(t){return this._binding=t,this},resolve:function(){var t=arguments,e=this;this._callbacks.apply(function(n,r){r.apply(e._binding,t)})}}),t.async=function(){return new e}}(pyscript),function(t){function e(e){t.extend(this,e)}t.extend(e.prototype,{update:function(t){return pyscript.extend(this,t)},keys:function(){var t=[];for(var e in this)this.hasOwnProperty(e)&&t.push(e);return t},values:function(){var t=[];for(var e in this)this.hasOwnProperty(e)&&t.push(this[e]);return t},clear:function(){for(var t in this)this.hasOwnProperty(t)&&delete this[t]},contains:function(t){return this.hasOwnProperty(t)},get:function(t,e){return this[t]||e},find:function(t){for(var e in this)if(this.hasOwnProperty(e)&&this[e]==t)return e}}),t.dict=function(t){return new e(t)}}(pyscript),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),function(t,e){var n=e(t);if("function"==typeof define&&define.amd)define("hotkeys",function(){return n});else if("object"==typeof exports)module.exports=n;else{var r=t.hotkeys;n.noConflict=function(){var e=t.hotkeys;return t.hotkeys=r,e},t.hotkeys=n}}(this,function(t,e){function n(t){w=t||"all"}function r(){return w||"all"}function o(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,function(){n(window.event)})}function s(t){return"string"==typeof t&&(t=j(t)),-1!==S.indexOf(t)}function c(t){return S.slice(0)}function p(t){var e,n=t.keyCode,o=E["*"];if(-1===S.indexOf(n)&&S.push(n),(93===n||224===n)&&(n=91),n in x){x[n]=!0;for(var s in b)b[s]===n&&(_[s]=!0);if(!o)return}for(var c in x)x[c]=t[O[c]];if(_.filter.call(this,t)){if(e=r(),o)for(i=0;i<o.length;i++)o[i].scope===e&&a(t,o[i],e);if(n in E)for(i=0;i<E[n].length;i++)a(t,E[n][i],e)}}function a(t,e,n){var r;if(e.scope===n||"all"===e.scope){r=e.mods.length>0;for(var i in x)(!x[i]&&e.mods.indexOf(+i)>-1||x[i]&&-1===e.mods.indexOf(+i))&&(r=!1);(0!==e.mods.length||x[16]||x[18]||x[17]||x[91])&&!r&&"*"!==e.shortcut||e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function u(t,n){for(var i,o,s=y(t),c=[],p=0;p<s.length;p++){if(i=s[p].split("+"),i.length>1&&(c=d(i)),t=i[i.length-1],t=j(t),n===e&&(n=r()),!E[t])return;for(var a=0;a<E[t].length;a++)o=E[t][a],o.scope===n&&f(o.mods,c)&&(E[t][a]={})}}function l(t){var e,n,r;for(e in E)for(n=E[e],r=0;r<n.length;)n[r].scope===t?n.splice(r,1):r++}function f(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function h(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"===e||"SELECT"===e||"TEXTAREA"===e)}function d(t){for(var e=t.slice(0,t.length-1),n=0;n<e.length;n++)e[n]=b[e[n]];return e}function y(t){var e;return t=t.replace(/\s/g,""),e=t.split(","),""===e[e.length-1]&&(e[e.length-2]+=","),e}function g(t){var e=t.keyCode,n=S.indexOf(e);if(n>=0&&S.splice(n,1),(93===e||224===e)&&(e=91),e in x){x[e]=!1;for(var r in b)b[r]===e&&(_[r]=!1)}}function _(t,n,r){var i=y(t),o=[],s=0;for(r===e&&(r=n,n="all");s<i.length;s++)t=i[s].split("+"),o=[],t.length>1&&(o=d(t),t=[t[t.length-1]]),t=t[0],t="*"===t?"*":j(t),t in E||(E[t]=[]),E[t].push({shortcut:i[s],scope:n,method:r,key:i[s],mods:o})}var v,m={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},w="all",b={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},S=[],O={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"},x={16:!1,18:!1,17:!1,91:!1},j=function(t){return m[t]||t.toUpperCase().charCodeAt(0)},E={};for(k=1;k<20;k++)m["f"+k]=111+k;o(document,"keydown",function(t){p(t)}),o(document,"keyup",function(t){g(t)}),v={setScope:n,getScope:r,deleteScope:l,getPressedKeyCodes:c,isPressed:s,filter:h,unbind:u};for(var A in v)_[A]=v[A];return _}),String.prototype.contains=function(t){return-1!=this.indexOf(t)},String.prototype.ellipsis=function(t){return t=t||18,this.length>t?this.substr(0,t-3)+"...":this},String.prototype.endsWith=function(t){return-1!==this.indexOf(t,this.length-t.length)},String.prototype.beginsWith=function(t){return 0==this.indexOf(t)},String.prototype.rslice=function(t,e){return 0>t&&(t=this.length+t),0>e&&(e=this.length+e),this.slice(t,e)},String.prototype.replaceLastIndexOf=function(t,e){var n=this.lastIndexOf(t);return n>=0?this.substring(0,n)+e:void 0},String.prototype.toCamelCase=function(){return this.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(t,e){return 0===+t?"":0==e?t.toLowerCase():t.toUpperCase()})},String.prototype.sprintf=function(t){var e=this;for(var n in t)if(t.hasOwnProperty(n)){var r=new RegExp("{"+n+"}","gi");e=this.replace(r,t[n])}return e},pyscript.defmodule("cache").__init__(function(t){t.onSyncSuccess=pyscript.noop,t._storage=pyscript.dict()}).def({flush:function(t){t._storage.clear()},cacheFile:function(t,e,n){var r=pyscript.async(),i=new FileReader;return i.onload=function(i){t._storage[e]={localUrl:i.target.result,file:n},r.resolve(e,i.target.result)},i.readAsDataURL(n.file),r.promise},fetchUrl:function(t,e){return t._storage.get(e,{localUrl:e}).localUrl},syncAll:function(t){pyscript.map(t.syncFile,t._storage.keys())},syncFile:function(t,e){var n=t._storage.get(e);if(n){var r=n.file;r&&pyscript.requests.upload(n.url,r.file,r).then(t.onSyncSuccess)}},fetch:function(t,e,n){pyscript.check(e,String);var r=pyscript.async();return t._storage.contains(e)?pyscript.defer(function(){r.resolve(t._storage[e],e)}):pyscript.requests.get(e).then(function(){this.http.success?(t._storage[e]=n?n(this.responseText):this.responseText,r.resolve(t._storage[e],e)):pykit.alert("Failed to retrieve file.",{labels:{Ok:"Ok"}})}),r.promise},move:function(t,e,n){if(pyscript.check(n,String),pyscript.check(e,String),!t._storage[e])throw new ReferenceError("Cannot find "+e+" in cache!");t._storage[n]=t._storage[e],delete t._storage[e]},"delete":function(t,e){pyscript.check(e,String),delete t._storage[e]},contains:function(t,e){return pyscript.check(e,String),t._storage.contains(e)},find:function(t,e){return t._storage.find(e)},get:function(t,e,n){return t._storage.get(e,n)},keys:function(t){return t._storage.keys()},values:function(t){return t._storage.values()}}),pyscript.initialize("cache"),pyscript.cache=pyscript.module("cache"),pyscript.defmodule("requests").__init__(function(t){t.interceptors=[],t.parsers={echo:function(t){return t}},t.headers=null}).def({get:function(t,e,n,r){return t._send("GET",e,null,n,r)},del:function(t,e,n,r){return t._send("DELETE",e,null,n,r)},patch:function(t,e,n,r,i){return t._send("PATCH",e,n,r,i)},post:function(t,e,n,r,i){return t._send("POST",e,n,r,i)},put:function(t,e,n,r,i){return t._send("PUT",e,n,r,i)},upload:function(t,e,n,r){function i(){for(var e,n=0;n<t.interceptors.length;n++)if(e=t.interceptors[n].call(this))return;t._parseStatus(this),s.bind(this).resolve.apply(s,r)}function o(){t._parseStatus(this),s.bind(this).resolve.apply(s,r)}pyscript.check(e,String);var s=pyscript.async(),c=new FormData;c.append("upload",n);var p=new XMLHttpRequest;if(p.onload=i,p.onerror=o,p.open("POST",e,!0),t.headers)for(var a in t.headers)t.headers.hasOwnProperty(a)&&p.setRequestHeader(a,t.headers[a]);return p.send(c),s.promise},_send:function(t,e,n,r,i,o){pyscript.check(e,String),pyscript.check(e,n);var s=pyscript.async();i=pyscript.extend({"Content-Type":"application/json"},i||{}),t.headers&&pyscript.extend(i,t.headers),r=JSON.stringify(r);var c=new XMLHttpRequest;c.onload=function(){for(var e,n=0;n<t.interceptors.length;n++)if(e=t.interceptors[n].call(this))return;t._parseStatus(this),s.bind(this).resolve()},c.onerror=function(){t._parseStatus(this),s.bind(this).resolve()},c.open(e,n,!o);for(var p in i)i.hasOwnProperty(p)&&c.setRequestHeader(p,i[p]);return c.send(r),o?c:s.promise},_parseStatus:function(t,e){var n=e.status;e.http={success:n>=200&&400>n,redirect:n>=300&&400>n,error:n>=400,serverError:n>=500,clientError:n>=400&&500>n,conflict:409==n,created:201==n,unauthorized:401==n,missing:404==n,badRequest:400==n,noContent:204==n,ok:200==n,network:0==n||void 0===n}}}),pyscript.initialize("requests"),pyscript.requests=pyscript.module("requests"),pyscript.defmodule("router").__init__(function(t){t._routes={},t._params={},t._promises=[],window.addEventListener("hashchange",function(){t._onchange.call(t)})}).def({refresh:function(){pyscript.defer(function(){var t=document.createEvent("Event");t.initEvent("hashchange",!0,!0),window.dispatchEvent(t)})},route:function(t,e,n){e=pyscript.isString(e)?[e]:e;for(var r,i=0;i<e.length;i++)r=e[i],t._routes[r]=t._routes[r]||[],t._routes[r].push(n);return t},_onchange:function(t){var e=window.location.hash.slice(2).split("?")[0].split("/"),n=t.parseQuery(),r="";pyscript.map(function(i,o){r=r+"/"+i;var s=t._routes[o==e.length-1?r:r+"*"];if(s&&s.length>0)for(var c=0;c<s.length;c++)s[c].call(t,n)},e);for(var i=0;i<t._promises.length;i++)t._promises[i].resolve();t._promises=[]},parseQuery:function(){var t,e=window.location.hash,n=e.contains("?")?e.slice(2).split("?").last().split("&"):[],r={};return n.apply(function(e,n){t=n.split("="),r[t[0]]=decodeURIComponent(t[1])}),r},asQueryString:function(t,e){var n="?";for(var r in e)e.hasOwnProperty(r)&&e[r]&&(n+=r+"="+encodeURIComponent(e[r])+"&");return n.substr(0,n.length-1)},go:function(t,e,n){pyscript.check(e,String);var r=pyscript.async();return t._promises.push(r),window.location.hash=e+this.asQueryString(t._params),n&&t.refresh(),r.promise},query:function(t,e){pyscript.check(e,Object),t._params=e;var n=t.parseQuery();pyscript.extend(n,e),window.location.href=window.location.href.split("?")[0]+t.asQueryString(t._params)},redirect:function(t,e){window.location.pathname=e}}),pyscript.initialize("router"),pyscript.router=pyscript.module("router");